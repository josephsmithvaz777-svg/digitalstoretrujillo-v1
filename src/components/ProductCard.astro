---
interface Props {
    id: string;
    name: string;
    description: string;
    price: number;
    originalPrice?: number;
    duration: string;
    badge?: string;
    badgeColor?: string;
    gradient: string;
    logo?: string;
    features: string[];
    category: string;
}

const {
    id,
    name,
    description,
    price,
    originalPrice,
    duration,
    badge,
    badgeColor = "red",
    gradient,
    logo,
    features,
    category,
} = Astro.props;

const discount = originalPrice
    ? Math.round(((originalPrice - price) / originalPrice) * 100)
    : 0;
---

<div
    data-category={category}
    data-name={name.toLowerCase()}
    class="group relative flex flex-col bg-white dark:bg-card-dark border border-gray-100 dark:border-[#2a3441] rounded-xl overflow-hidden hover:shadow-2xl hover:shadow-primary/10 transition-all duration-300 hover:-translate-y-1"
>
    {
        badge && (
            <div
                class={`absolute top-3 left-3 z-10 bg-${badgeColor}-500 text-white text-[10px] font-bold px-2 py-1 rounded shadow-sm`}
            >
                {badge}
            </div>
        )
    }

    <div
        class="absolute top-3 right-3 z-10 bg-black/60 backdrop-blur-md text-white text-[10px] font-bold px-2 py-1 rounded flex items-center gap-1"
    >
        <span class="material-symbols-outlined text-[12px]">bolt</span> Instant√°neo
    </div>

    <div
        class={`h-32 ${gradient} flex items-center justify-center p-6 relative overflow-hidden`}
    >
        <div
            class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"
        >
        </div>
        {
            logo ? (
                <img
                    alt={`${name} Logo`}
                    class="h-12 w-auto object-contain drop-shadow-lg relative z-10"
                    src={logo}
                />
            ) : (
                <div class="flex items-center gap-2 text-white relative z-10 drop-shadow-lg">
                    <span class="material-symbols-outlined text-[40px]">
                        star
                    </span>
                    <span class="font-bold text-2xl">{name}</span>
                </div>
            )
        }
    </div>

    <div class="p-5 flex flex-col flex-1">
        <div class="flex justify-between items-start mb-2">
            <div>
                <h3 class="text-lg font-bold text-slate-900 dark:text-white">
                    {name}
                </h3>
                <p class="text-xs text-slate-500 dark:text-gray-400 mt-1">
                    {description}
                </p>
            </div>
        </div>

        <div class="flex flex-wrap gap-2 mb-4 mt-2">
            {
                features.map((feature) => (
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-gray-100 dark:bg-[#2a3441] text-gray-600 dark:text-gray-300">
                        {feature}
                    </span>
                ))
            }
        </div>

        <div
            class="mt-auto pt-4 border-t border-gray-100 dark:border-[#2a3441]"
        >
            <div class="flex items-end justify-between mb-4">
                <div class="flex flex-col">
                    {
                        originalPrice && (
                            <span class="text-xs text-gray-400 line-through">
                                ${originalPrice}
                            </span>
                        )
                    }
                    <div class="flex items-baseline gap-1">
                        <span class="text-2xl font-black text-primary"
                            >${price}</span
                        >
                        <span
                            class="text-xs text-slate-500 dark:text-gray-400 font-medium"
                            >/{duration}</span
                        >
                    </div>
                </div>

                <div
                    class="flex gap-1.5 opacity-60 grayscale group-hover:grayscale-0 transition-all"
                >
                    <span
                        class="material-symbols-outlined text-gray-500 dark:text-gray-400 text-[18px]"
                        title="Crypto">currency_bitcoin</span
                    >
                    <span
                        class="material-symbols-outlined text-orange-500 text-[18px]"
                        title="Hotmart">local_fire_department</span
                    >
                </div>
            </div>

            <a
                href={`/producto/${id}`}
                class="w-full bg-primary hover:bg-primary-hover text-white font-bold py-2.5 rounded-lg transition-colors flex items-center justify-center gap-2 group-hover:shadow-lg group-hover:shadow-primary/25"
            >
                Comprar Ahora
            </a>
        </div>
    </div>
</div>
